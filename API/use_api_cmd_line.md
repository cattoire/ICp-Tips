# Use ICp API from command line

1. Login to the cluster:  
```
bx pr login
```
![bx pr login](./images/bx_pr_login.png)

2. Get authentication tokens:  
```
bx pr tokens
```
![bx pr tokens](./images/bx_pr_tokens.png)

3. Set Environment variable with tokens:  
```
export ID_TOKEN= eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdF9oYXNoIjoidzFjYWZ3dTE4NDY4djUydWloMW8iLCJyZWFsbU5hbWUiOiJjdXN0b21SZWFsbSIsInVuaXF1ZVNlY3VyaXR5TmFtZSI6ImFkbWluIiwiaXNzIjoiaHR0cHM6Ly9teWNsdXN0ZXIuaWNwOjk0NDMvb2lkYy9lbmRwb2ludC9PUCIsImF1ZCI6Ijc0NTVlYzU0NmE4MmQ4ZmI3ZDMyMDVhY2JmMzRjNjI2IiwiZXhwIjoxNTI2MjgzODU5LCJpYXQiOjE1MjYyODM4NTksInN1YiI6ImFkbWluIiwidGVhbVJvbGVNYXBwaW5ncyI6W119.GEocttYk1La5eR7UHsDsEuq0m1qc1djOyKRyW5vosUsceq22EJktg70R5_Ez2wisNYLX6_2-Nu7QEYQUDpLzb0CaEUSN01oeUp8xvYnb3OdtxTSdyqT3XF05evnFq2jy96-bI4ZNH-tEUzJYrODfyaaQJA-vIbxbAbpgGefP92beo6u_AyJWpcJssEg2bCx9QW18a0Db72sLIFF6wSNC0CzeNvW79fpA1TW-yQ1HcJkyRlorrq4xIsyg_Oeipu6E9NiLXFqj8UPY1pttMmVszMKHMVkIKp6y_n_NLSxt74Xui-Fpp68P3Q7Ys5z378WI_D2BDv1mwm3HwRZI-bz-7A  
export ACCESS_TOKEN= VI89PjAFuHft8Cj8b20twHxAnC7NwUVbmSv6AzkUInXAKVr3PHQygRVbwSJpJeuryYQrtkbke7b8DjfsBsybb2BM25fp3oMXOLPKYs0md4RqIacuJKORSKk3iCOStZR2R8zoQQc7aK3KQShSj6RRBdQvt9gOjFzshhZ4eEZBD45IPSSJ4jyAET1myFo9exqne7NcfeTVze8i0SZpPAwC6btILA1bb9TOx4V0qbr9lSM2bqPQgukpimnzuMvfL1bHtk8lfkLwZpWQtoS5p7AgtAyUrDMRk4FKFPHMBoEB04ZmyDcBiHdmYVOBtg6YTPAH7Zqr9CWtUFzdOA2FH7vjYk8Dws91CzABYKirrCEC3DzuNdWpAzRUxq8KiRIQhRhvPKlFv0tcQuT8vsY210zGrdgcInlLXvTAt9JEWJBufkAb74QUu3AwOdJRrUYUk8JQGclnoG7YY8ckF3nA7bpg6Vy57HoD3WzG4tkLat1nnuqh9eirRyrmhCdTY1oRIYa3cBr45aShdOUBPvR2ffjpdKfpIXyDfqgyo0Ft8ThUdH5ZlupUMt5ZiBXZVdz2C5vtHOykzGphNAKyi3OvyTGHXTO3ZDxRCeEiIBy2PdqYsWOIMFNa5xgWNayFQqqwgIOYiFV9o02AmsavI85mpNVt5Hahl0LuLnHHgSJOAptY1Q0rXIMMMekkCbfgHgG7EdtHuQQvRMwVeW7wbqWz3muBvddAvDqnXUAL0su8bJ6JKaZKCDmzsGBe4TF6aJSPEd3B4PqDfOOphCBtIXljamYk4ELb23yYctE5JuzxZDs8zlk0R91bwwlb9TOHCcTNyOKjdcTMDcW7uSE1uHCwJ92tSDHWp2T6o58pQSNoWBvM79Ya54bIEzoU50JOHe90PSolx2ucnbBVg0403tLQkIdVV4xjgjEonNSkt6EsSVY0uI14SOSK5tFOCnCUk7Jd4GZ7oev0RQqinAwkDJCXexTdpqHSM0kVkQNeW4ZsA974
```
![bx pr tokens](./images/set_env_var.png)

4. Use the API to interact with ICp cluster_ip  
Here is a sample to retreive the list of namespace  
```
curl -k -X GET --header "Authorization: Bearer $ID_TOKEN" https://172.16.249.120:8001/api/v1/namespaces
```
![list of namespaces](./images/namespace_list.png)
